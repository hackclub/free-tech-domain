<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Get a Free .TECH Domain | Hack Club</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.1/foundation.min.css" />
    <style>
     html, body {
       width: 100%;
       height: 100%;
     }

     body {
       background: linear-gradient(to bottom right, #FE4B57, #EB4E70);
       background-repeat: no-repeat;
       background-attachment: fixed;
     }

     .wrapper {
       margin-top: 1rem;

       position: relative;
       top: 50%;
       transform: translateY(-50%);
     }
    </style>
  </head>
  <body>
    <div class="row wrapper">
      <div class="medium-8 large-6 medium-centered columns">
        <div class="callout">
          <h1>Get a Free .TECH Domain</h1>
          <p>
            Hack Club has partnered with <a href="http://get.tech/">.tech</a> to
            get every Hack Club member a free .tech domain.
          </p>
          <p>
            Just fill out the form below to submit your request and the .tech
            team will get you set up (they generally respond to requests within
            the day). Shoot an email to
            <a href="mailto:zach@hackclub.com">zach@hackclub.com</a> if you run
            into any trouble.
          </p>
          <form id="domain_request_form" data-abide novalidate>
            <div class="success callout" id="success_callout" data-closable style="display: none;">
              <h5>Boo yah!</h5>
              <p>Domain requested, check your email for a confirmation.</p>
              <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div data-abide-error class="alert callout" style="display: none;">
              <p><i class="fi-alert"></i> You're super close! Just a few errors to fix.</p>
            </div>
            <div class="row">
              <div class="small-6 columns">
                <label>Your Name
                  <input type="text" name="name" placeholder="Prophet Orpheus" required>
                  <span class="form-error">
                    Required
                  </span>
                </label>
              </div>
              <div class="small-6 columns">
                <label>Email
                  <input type="email" name="email" placeholder="orpheus@hackclub.com" required>
                  <span class="form-error">
                    A valid email is required
                  </span>
                </label>
              </div>
            </div>
            <div class="row">
              <div class="small-12 columns">
                <label>Domain
                  <input type="text" name="domain" placeholder="prophetorpheus.tech" required pattern="tech_domain">
                  <span class="form-error">
                    A valid domain is required
                  </span>
                </label>
              </div>
            </div>
            <div class="row">
              <div class="small-12 columns">
                <label>Secret Code
                  <input type="text" name="secret_code" required pattern="secret_code">
                  <span class="form-error">
                    A valid secret code is required
                  </span>
                </label>
              </div>
            </div>
            <div class="row">
              <fieldset class="large-6 columns">
                <button class="button" type="submit">Request Domain</button>
              </fieldset>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/what-input/2.0.1/what-input.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.2.1/foundation.min.js"></script>
    <script type="text/javascript">
     !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
       analytics.load('myoJNvg3waOUUg19htAb9pHI7inrEGTE');
       analytics.page()
     }}();
    </script>
    <script>
     $(document).foundation();

     Foundation.Abide.defaults.patterns['tech_domain'] = /\.tech$/;
     Foundation.Abide.defaults.patterns['secret_code'] = /^HACKFORLIFE$/;

     var form = $('#domain_request_form');
     var nameInput = form.find('input[name="name"]');
     var emailInput = form.find('input[name="email"]');
     var domainInput = form.find('input[name="domain"]');

     var successCallout = $('#success_callout');

     var userHasEditedDomain = false;

     nameInput.on('input', function () {
       if (!userHasEditedDomain) {
         if (this.value == '') {
           domainInput.val('');
         } else {
           var domainName = this.value.toLowerCase()
                                .replace(/[^\w]|_/g, '')
                                .replace(/\s+/g, '') + '.tech';
           domainInput.val(domainName);
         }
       }
     });

     domainInput.on('input', function () {
       userHasEditedDomain = true;
     });

     form.on('formvalid.zf.abide', function (e) {
       e.preventDefault();

       var inputs = form.find(':input');

       var values = {};
       inputs.each(function() {
         values[this.name] = $(this).val();
       });

       // Form to submit to .tech's request form
       var techForm = new FormData();

       // Prefilled data on the form
       techForm.append('iphorm_id', '6');
       techForm.append('iphorm_uid', '57212e5ea7534');
       techForm.append('form_url', 'http://get.tech/startups/');
       techForm.append('post_id', '6637');
       techForm.append('post_title', 'Startups');
       techForm.append('iphorm_ajax', '1');
       techForm.append('iphorm_6_0', '');

       // Our custom data
       techForm.append('iphorm_6_1', values.name);
       techForm.append('iphorm_6_2', values.email);
       techForm.append('iphorm_6_3', 'Hack Club');
       techForm.append('iphorm_6_4', values.domain);

       $.ajax({
         url: 'https://surrogate.hackedu.us/get.tech/startups/',
         data: techForm,
         processData: false,
         contentType: false,
         type: 'POST',
         error: function (data) {
           // Despite throwing an error about cross origin checks failing,
           // get.tech's server accepts the request, so we should show the user a
           // success message.
           trackFormSubmit(values);
           successCallout.show();
           form.trigger('reset');
         },
         success: function (data) {
           // Just in case the request succeeds for some reason.
           trackFormSubmit(values);
           successCallout.show();
           form.trigger('reset');
         }
       });
     });

     // Intercept form submission that's bypassing validation.
     form.on('submit', function (e) {
       e.preventDefault();
     });

     function trackFormSubmit(data) {
       analytics.identify(data.email, {
         name: data.name,
         email: data.email
       });

       analytics.track('Domain Requested', {
         domain: data.domain
       });
     }
    </script>
  </body>
</html>
